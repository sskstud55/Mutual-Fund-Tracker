<!DOCTYPE html>
<html lang="en">
<head>
    <title>My Wealth Manager</title>
</head>
<body>
    <h2>Welcome, {{ user }}</h2>
    <a href="{{ url_for('logout') }}">Logout</a>

    <h3>Transactions</h3>
    <table>
        <tr><th>Date</th><th>Fund Name</th><th>Amount</th><th>Units</th></tr>
        {% for t in transactions %}
        <tr>
            <td>{{ t[0] }}</td>
            <td>{{ t[1] }}</td>
            <td>{{ t[2] }}</td>
            <td>{{ t[3] }}</td>
        </tr>
        {% endfor %}
    </table>

    <h3>Add Transaction</h3>
    <form id="addTransactionForm">
        <input type="date" name="date" required>
        <input type="text" name="fund_name" placeholder="Fund Name" required>
        <input type="number" name="amount" placeholder="Amount" required>
        <input type="number" name="units" placeholder="Units" required>
        <button type="submit">Add</button>
    </form>

    <script>
        document.getElementById("addTransactionForm").onsubmit = function(event) {
            event.preventDefault();
            fetch("/transactions", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify(Object.fromEntries(new FormData(event.target)))
            }).then(() => location.reload());
        };
    </script>
</body>
</html>
